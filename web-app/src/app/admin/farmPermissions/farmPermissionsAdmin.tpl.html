<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Farm Permissions Admin</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>


<div class="row">
    <div class="col-lg-12">
        <p>These permissions define the access a user has to a farm.
        </p>
    </div>
    <!-- /.col-lg-12 -->
</div>


<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-primary">
            <div class="panel-heading">
                Farm Permissions
            </div>
            <div class="panel-body">

                <div class="table-responsive">
                    <table class="table table-condensed table-hover">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>User</th>
                            <th>Farm</th>
                            <th>Role</th>
                            <th>Actions</th>
                        </tr>
                        </thead>

                        <tbody>

                        <tr ng-repeat="permission in farmPermissions">
                            <td>{{permission.id}}</td>
                            <td>{{permission.user.firstName}} {{permission.user.lastName}}</td>
                            <td>{{permission.farm.name}} </td>
                            <td>{{permission.role.name}} </td>
                            <td>
                                <button class="btn btn-danger btn-xs" ng-click="deletePermission(permission)"><span class="glyphicon glyphicon-trash"></span></button>
                                <button class="btn btn-success btn-xs" ><span class="glyphicon glyphicon-edit"></span></button>
                            </td>
                        </tr>

                        </tbody>
                    </table>
                 </div>

                <!-- Button trigger modal -->

                <a href="#" class="btn btn-success" data-toggle="modal" data-target="#addPermissionModal">Create Permission</a>

                <!-- Modal -->
                <div class="modal fade" id="addPermissionModal" tabindex="-1" role="dialog" aria-labelledby="addPermissionModal" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title" id="addPermissionModalLabel">Create a new farm permission</h4>
                            </div>
                            <div class="modal-body">

                                <form>

                                    <div class="form-group">
                                        <label>Farm</label>
                                        <select class="form-control"  ng-model="permission.farm" ng-options="farm as farm.name for farm in farms" id="selectFarm">
                                        </select>
                                        {{selectedItem | json}}
                                    </div>

                                    <div class="form-group">
                                        <label>User</label>
                                        <select class="form-control"  ng-model="permission.user" ng-options="user as user.fullName for user in users" id="selectUser">
                                        </select>
                                        {{selectedItem | json}}
                                    </div>

                                    <div class="form-group">
                                        <label>Role</label>
                                        <select class="form-control"  ng-model="permission.role" ng-options="role as role.name for role in roles" id="selectRoles">
                                        </select>
                                        {{selectedItem | json}}
                                    </div>                                    
                                </form>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                <button type="button" class="btn btn-primary" ng-click="createPermission(permission.farm, permission.user, permission.role)">Create</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->


           </div>
        </div>
    </div>
</div>
